(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a(49),l=a(315),c=a(252),s=a.n(c),p=a(45),d=a.n(p),m=a(46),u=a.n(m),g=a(237),h=a.n(g),f=a(238),b=a.n(f),y=a(239),v=a.n(y),E=a(1),w=a.n(E),S=a(301),k=a(272),x=a(311),j=a(277),C=a(271),N=a(77),O=a(12),z=a.n(O),D=a(312),R=a.n(D),W=a(9),P=a(52),q=a(78),I=a(79),M=a(80),T=a(58),F=a(13),L=a(17),_=Object(N.makeStyles)(function(e){return{btnWrapper:{width:"100%",display:"flex",alignItems:"center"},btn:{flex:1,height:38},disabled:{background:e.palette.primary[400]},copyWrapper:{width:500,height:150,margin:[[20,20,30]],padding:10,fontSize:e.typography.fontSizeMd,color:e.palette.text.secondary,border:"1px solid ".concat(e.palette.border.borderDD)}}}),A=function(e){var t=e.id,a=Object(n.useState)(!1),i=z()(a,2),o=i[0],l=i[1],c=Object(n.useState)(!1),s=z()(c,2),p=s[0],d=s[1],m=Object(n.useState)(null),u=z()(m,2),g=u[0],h=u[1],f=_();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f.btnWrapper},r.a.createElement(W.a,{color:"primary",className:f.btn,onClick:function(){l(!0),Object(T.e)("/api/promotions/link/".concat(t)).then(function(e){var t=e.link;h(t)})}},"GetLink"),r.a.createElement(P.a,{margin:[[0]],width:1,color:"borderDD"}),r.a.createElement(W.a,{color:"primary",loading:p,className:"".concat(f.btn," ").concat(p?f.disabled:""),onClick:function(){d(!0),Object(T.e)("/api/promotions/add/".concat(t)).then(function(e){e.message===T.a&&(d(!1),F.a.open({message:L.k.addProductSuccess,variant:"success",duration:2.5}))}).catch(function(){d(!1)})}},"Select")),r.a.createElement(q.a,{open:o,onClose:function(){l(!1)},wrapperCls:f.copyWrapper,header:r.a.createElement(I.a,{title:"Get Link"}),footer:r.a.createElement(M.a,{handleChange:function(){g&&(R()(g),l(!1),F.a.open({message:L.k.copyLinksSuccess,variant:"success",duration:5}))},handleDelete:function(){l(!1)},disabled:!g})},g||"loading...."))};A.propTypes={id:w.a.string.isRequired};var B=A,G=a(81),H=a(10),J=Object(N.makeStyles)(function(e){return{root:{width:"24.2%",marginBottom:10,marginRight:"1%",background:e.palette.primary[50],"&:nth-child(4n)":{marginRight:0},"&:hover":{boxShadow:e.shadows[5]}},img:{width:"100%",height:"inherit",borderRadius:"inherit","&:before":{paddingTop:312,content:'""',background:e.palette.background.disabled,display:"block",width:"100%"},"& > img":{position:"absolute"}},info:{display:"flex",flexDirection:"column",alignItems:"center",padding:[[0,10]],color:e.palette.text.primary},name:{width:"100%",lineHeight:"26px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center",fontSize:e.typography.fontSizeMd,fontWeight:e.typography.fontWeight},price:{height:26,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.typography.fontSizeMd,"& span:first-child":{marginRight:10,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},advertising:{display:"flex",alignItems:"center",height:24,fontSize:e.typography.fontSize},brokerage:{margin:[[0,6,0,10]],fontWeight:e.typography.fontWeight,color:e.palette.error[500]},rate:{color:e.palette.error[500]},date:{lineHeight:"24px",fontSize:e.typography.fontSize,"& span:last-child":{marginLeft:10,fontSize:e.typography.fontSizeMd}}}}),$=function(e){var t=e.data,a=J();return r.a.createElement("div",{className:a.root},r.a.createElement(G.a,{photo:t.prodImg,classes:{img:a.img}}),r.a.createElement("div",{className:a.info},r.a.createElement("span",{className:a.name},t.prodName),r.a.createElement("span",{className:a.price},r.a.createElement("span",null,t.storeName),r.a.createElement("span",null,"$",t.prodPrice.toFixed(2))),r.a.createElement("span",{className:a.advertising},r.a.createElement("span",null,"Advertising Fees :"),r.a.createElement("span",{className:a.brokerage},"$",Object(H.k)(t.prodPrice,t.brokerageRate)),r.a.createElement("span",{className:a.rate},t.brokerageRate,"%")),r.a.createElement("span",{className:a.date},r.a.createElement("span",null,"Remaining Days :"),r.a.createElement("span",null,Object(H.h)(t.endTime)))),r.a.createElement(B,{id:t.id}))};$.propTypes={data:w.a.objectOf(w.a.object).isRequired};var U,K=$,Q=a(48),V=8,X=Object(S.default)(function(){return{root:{flex:1},header:{width:"100%",display:"flex",justifyContent:"flex-end",marginBottom:10},wrapper:{width:"100%",display:"flex",flexFlow:"wrap"}}})(U=function(e){function t(e){var a;return d()(this,t),(a=h()(this,b()(t).call(this,e))).getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.pageCurrent,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.sort;return new Promise(function(i){a.value=e,a.pageCurrent=t,Object(T.c)("/api/promotions/all",s()({page:t,size:n},e,{sort:r})).then(function(e){var t=e.total,n=e.items;a._unmount&&(a.setState({items:n,total:t,loading:!1}),i(!0))}).catch(function(e){console.log(e),i(!0)})})},a.handleSelectChange=function(e){a.sort=e,a.getData().then()},a.handlePaginationChange=function(e){a.pageCurrent=e,a.getData().then()},a.state={items:[],total:0,loading:!0},a.sort=Q.q.productSort[0].value,a.pageCurrent=1,a.value=null,a}return v()(t,e),u()(t,[{key:"componentDidMount",value:function(){this._unmount=!0,this.getData().then()}},{key:"componentWillUnmount",value:function(){this._unmount=!1}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.items,n=t.total,i=t.loading;return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.header},r.a.createElement(x.a,{selects:Q.q.productSort,onChange:this.handleSelectChange})),r.a.createElement(k.a,{loading:i},r.a.createElement("div",{className:e.wrapper},a.length?a.map(function(e){return r.a.createElement(K,{data:e,key:e.id})}):r.a.createElement(C.a,{height:375})),r.a.createElement(j.a,{total:n,pageSize:V,pageCurrent:this.pageCurrent,change:this.handlePaginationChange})))}}]),t}(r.a.Component))||U;X.propTypes={classes:w.a.objectOf(w.a.object).isRequired};var Y=X,Z=Object(i.default)(function(){return{root:{display:"flex"}}});t.default=function(){var e=Z(),t=Object(n.useRef)();return r.a.createElement(o.a,{className:e.root},r.a.createElement(l.a,{viewRef:t}),r.a.createElement(Y,{ref:t}))}}}]);